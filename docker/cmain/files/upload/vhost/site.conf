server
        {
                listen 443 ssl;
                server_name c_web;
                ssl_certificate     coinbest.crt;
                ssl_certificate_key coinbest.key;
                index index.html index.htm index.php default.html default.htm default.php;
                root  /data/c_web/src;

                location / {
                        # Check if a file or directory index file exists, else route it to index.php.
                        try_files $uri $uri/ /index.php;
                }

                location ~ .*\.(php|php5)?$
                        {
                                try_files $uri =404;
                                fastcgi_param CH_ENV dev;
                                fastcgi_pass  unix:/tmp/php-cgi.sock;
                                fastcgi_index index.php;
                                include fastcgi.conf;
                        }

                location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
                        {
                                expires      30d;
                        }

                location ~ .*\.(js|css)?$
                        {
                                expires      12h;
                        }

                location ^~ /_private/
                        {
                                deny all;
                        }
                location /app/
                        {
                                proxy_pass http://c_app/;
                        }
                access_log off;
        }
server
        {
                listen 80;
                listen 8000;
                server_name c_web;
                index index.html index.htm index.php default.html default.htm default.php;
                root  /data/c_web/src;

                location / {
                        # Check if a file or directory index file exists, else route it to index.php.
                        try_files $uri $uri/ /index.php;
                }

                location ~ .*\.(php|php5)?$
                        {
                                try_files $uri =404;
                                fastcgi_param CH_ENV dev;
                                fastcgi_pass  unix:/tmp/php-cgi.sock;
                                fastcgi_index index.php;
                                include fastcgi.conf;
                        }

                location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
                        {
                                expires      30d;
                        }

                location ~ .*\.(js|css)?$
                        {
                                expires      12h;
                        }

                location ^~ /_private/
                        {
                                deny all;
                        }
                location /app/
                        {
                                proxy_pass http://c_app/;
                        }
                access_log off;
        }


server
        {
                listen 80;
                listen 8001;
                server_name c_app;
                index index.php;
                root /data/c_application/src;

                location / {
                        # Check if a file or directory index file exists, else route it to index.php.
                        try_files $uri $uri/ /index.php;
                }

                location ~ .*\.(php|php5)?$
                        {
                                try_files $uri =404;
                                fastcgi_param CH_ENV dev;
                                fastcgi_pass  unix:/tmp/php-cgi.sock;
                                fastcgi_index index.php;
                                include fastcgi.conf;
                        }

                location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
                        {
                                expires      30d;
                        }

                location ~ .*\.(js|css)?$
                        {
                                expires      12h;
                        }

                location ^~ /_private/
                        {
                                deny all;
                        }
                access_log off;
        }

server
        {
                listen 80;
                listen 8002;
                server_name c_btc coin-agent-1;
                index index.php;
                root /data/c_coin_btc/src;

                location / {
                        # Check if a file or directory index file exists, else route it to index.php.
                        try_files $uri $uri/ /index.php;
                }

                location ~ .*\.(php|php5)?$
                        {
                                try_files $uri =404;
                                #fastcgi_param CI_ENV production;
                                fastcgi_param CH_ENV dev;
                                fastcgi_param CH_COIN_ID 1 ;
                                fastcgi_pass  unix:/tmp/php-cgi.sock;
                                fastcgi_index index.php;
                                include fastcgi.conf;
                        }

                location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
                        {
                                expires      30d;
                        }

                location ~ .*\.(js|css)?$
                        {
                                expires      12h;
                        }

                location ^~ /_private/
                        {
                                deny all;
                        }
                access_log off;
        }

